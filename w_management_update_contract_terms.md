Müqavilə şərtlərinin dəyişilməsinde olan problemler

Front issues:

1. Xidmət seçimi hesablaması işləmir ([RPI-405](https://remartpro.atlassian.net/browse/RPI-405)). Burada problem serviceContract sehifesinin diger sehifeler kimi vahid dinamik strukturda olmamasidir. Onun ucun diger sehifelerde `addon_contract.js` mentiqini tetbiq edende, sehifesnin oz funksionalliqi itmir. Mende eyni ile elave elemisem, ama funksionalliqlar itib, mecbur elle duzelisler etmisem ve o da netice olaraq gah ishleyir gah islemir. Burada meselenin helli mence bele olmalidi. ServiceContract sehifesinin modular seviyyede refactoring olunmasi, yeni o sehifede olan bloklarin bir birinden asili olmayaraq musteqil ishleye bilmeyini temin etmek. Bu problem hell olunarsa, `contractFlow` blokunu istenilen yerde import ederek ishlek neticeye catmaq olar. Tapsiriq lahiyenin Javascript terefinde oldugu uchun estimation etmek cetinlesir ~ 1-1.5d 
####
2. Lifetime gəlmir ([RPI-406](https://remartpro.atlassian.net/browse/RPI-406)). Buradaki mesele bir onceki tapsiriqin hell etmekle qaydasina dushmelidir. Hal hazirda manual fix olunub (yene de gah ishleyir gah islemir). Bundan onceki mesele hell olunarsa burada ish sadece manual olunan fixi legv etmekdir ~ 2h
####
3. müqaviləni yadda saxlayanda error verir ([RPI-406](https://remartpro.atlassian.net/browse/RPI-406)). Bu error front issuedir. Parametrlerin bezileri Firefox browserinde bosh gonderilir (daha dogrusu hesablana bilmir deye NaN olaraq gonderilir) ve backend validation etmeden birbasha sorguya gonderir. Eslinde bu errorun da helli validation elave etmek backend uchun ~1h
####
4. Shertlerin deyisdirilmesi mentiqi ardicilliqi (([RPI-406](https://remartpro.atlassian.net/browse/RPI-406))). Burada bash veren prosesi tam olaraq analiz etmisem, dusuncelerim bu istiqametdedir. Ama flow'nun bu ardicilliqda olub olmamasini yoxlamasini Rinatdan xaish ede bilerik. Umumiyyetle sistemde muqavilelerin altinda paketler dayanir, bizim uchun invoys anlayishi `s_packages` cedvelinde bir setr melumatdir (`kind = M`). Ve eger her hansi bir muqavilenin shertleri deyisirse bu bele bash verir. Ilk once generateContract cagirilir ve o sorguda muqavilenin `parent_package_id` si `linked_package_id` olaraq `generateContract` emeliyati ile frontden'den gonderilir, ve emeliyatin tipi `contracts_terms_change` sechilmelidir. Bu zaman backend shertlerin deyisildiyini basha dusub odenilmemish qaimeleri silmelidir, yeni paket yaratmalidir, lakin linked_package_id mutleq qeyd olunur. Muqavile generate olunduqda bazada yeni shertlere uygun paket ve shertlerin deyisdirilmesi ile bagli `nf_operation` yaranir. Qayidan response'da bu nf_operation_id qeyd olunur. Istifadeci 
daha sonra `saveContract` buttonu vuraraq bu yaranan yeni shertli muqavileni ve nf_operation_id ni esas tutaraq muqavileni yaddasha vurur. Esas logic burada olmalidir. Bu hissede backend gonderilen `nf_operation_id` ni esas tutaraq, requestde gonderilen emeliyat tipine gore teyin etmelidir ki muqavilen yeni yaranir yoxsa shertleri deyisir. Bunu teyin etdikden sonra muqavilenin baglanmamish (kind = M) `s_billable_items` silmeli, ve yenileri yeni shertlere uygun olaraq `s_packages` ile birge bazaya girilmelidir. Bu noqtede emeliyat tamamlana biler. Bu mentiqin davranishini RealEstate-den analiz edib bu tip basha dusmusem. Ama hazirki realizasiyada `linked_package_id`, `contractor_flag` kimi shertlerin deyisdirilmesini gosteren parametrlerin teyin olunmasi, yaranmasinda problemler var deye shertler deyisende yeni paket yaranir ama hecbir var olan pakete menimsedilmeden yaddasha oturur ve s. diger predict olunmayan emeliyatlar toredir. Hell yolu odur ki ilk once frontend terefden bu parametrlerin dogru gonderilmesini temin etmek. Ikinci hisse ise bu hisseni `w_management` paketlerinin mentiqine esasen individuallasdirmaq. Cunku Management ile RealEstate'in paketleri (`CP`) olaraq oxshar olsalar bele, `recurring_amount` mentiqleri bashqa cur calisir. Taskin analizine umumen 4-5 saata yaxin bir zaman gedib, mentiqi hissesinin helli uchun dusunurem complex olaraq 2 gunluk ish var. Bu tip tapsiriqlara zaman estimate etmek uchun peygembirlik yetenekleri lazimdi :)
